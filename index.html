<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Simulasi Percepatan Pelunasan Cicilan</title>
<style>
  body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 20px; background: #fff; }
  h2 { text-align: center; color: #004aad; }
  form { background: #f8f8f8; padding: 20px; border-radius: 10px; max-width: 600px; margin: 0 auto; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
  label { display: block; margin-top: 12px; font-weight: 600; }
  input { width: 100%; padding: 10px; margin-top: 6px; border: 1px solid #ccc; border-radius: 6px; }
  button { width: 100%; margin-top: 18px; background: #004aad; color: white; border: none; border-radius: 6px; padding: 12px; cursor: pointer; font-size: 1rem; }
  button:hover { background: #003580; }
  .result { background: #f1f1f1; margin-top: 25px; padding: 15px; border-radius: 6px; max-width: 600px; margin-left: auto; margin-right: auto; }
  .result h3 { margin-top: 0; }
  @media (max-width: 600px) {
    body { padding: 15px; }
    form { padding: 15px; }
  }
</style>
</head>
<body>

<h2>Simulasi Percepatan Pelunasan Cicilan</h2>

<form id="formSimulasi">
  <label>Tabungan per bulan (Rp)</label>
  <input type="number" id="tabunganBulanan" required placeholder="misal 2.000.000">

  <label>Tambahan tabungan tiap 12 bulan (Rp)</label>
  <input type="number" id="bonusTahunan" required placeholder="misal 15.000.000">

  <label>Cicilan per bulan (Rp)</label>
  <input type="number" id="cicilanBulanan" value="5800000" required>

  <label>Tahun mulai cicilan & tabungan</label>
  <input type="number" id="tahunMulai" value="2026" required>

  <label>Bulan mulai cicilan & tabungan (1-12)</label>
  <input type="number" id="bulanMulai" value="6" required>

  <label>Tahun selesai cicilan</label>
  <input type="number" id="tahunSelesai" value="2031" required>

  <label>Bulan selesai cicilan (1-12)</label>
  <input type="number" id="bulanSelesai" value="5" required>

  <button type="submit">Hitung</button>
</form>

<div class="result" id="hasil"></div>

<script>
document.getElementById("formSimulasi").addEventListener("submit", function(e){
  e.preventDefault();

  const tabunganBulanan = parseFloat(document.getElementById("tabunganBulanan").value);
  const bonusTahunan = parseFloat(document.getElementById("bonusTahunan").value);
  const cicilanBulanan = parseFloat(document.getElementById("cicilanBulanan").value);
  const tahunMulai = parseInt(document.getElementById("tahunMulai").value);
  const bulanMulai = parseInt(document.getElementById("bulanMulai").value);
  const tahunSelesai = parseInt(document.getElementById("tahunSelesai").value);
  const bulanSelesai = parseInt(document.getElementById("bulanSelesai").value);

  // Validasi input
  if (bulanMulai < 1 || bulanMulai > 12 || bulanSelesai < 1 || bulanSelesai > 12) {
    alert("Bulan harus antara 1 sampai 12");
    return;
  }

  const totalBulanCicilan = (tahunSelesai - tahunMulai) * 12 + (bulanSelesai - bulanMulai + 1);
  const totalCicilan = totalBulanCicilan * cicilanBulanan;

  let totalTabungan = 0;
  let percepatanBulan = null;

  for (let i = 1; i <= totalBulanCicilan; i++) {
    totalTabungan += tabunganBulanan;
    if (i % 12 === 0) totalTabungan += bonusTahunan;

    const sisaCicilan = (totalBulanCicilan - i) * cicilanBulanan;

    // Cek kapan tabungan cukup untuk melunasi sisa cicilan
    if (totalTabungan >= sisaCicilan && !percepatanBulan) {
      percepatanBulan = i;
    }
  }

  const bulanNames = ["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];

  let hasil = `<h3>Hasil Simulasi Percepatan Pelunasan</h3>`;
  hasil += `<p>Total cicilan normal hingga ${bulanNames[bulanSelesai - 1]} ${tahunSelesai}: <b>Rp ${totalCicilan.toLocaleString('id-ID')}</b></p>`;
  hasil += `<p>Total tabungan hingga akhir periode: <b>Rp ${totalTabungan.toLocaleString('id-ID')}</b></p>`;

  if (percepatanBulan) {
    // Hitung tanggal percepatan
    const totalBulanIndex = (tahunMulai * 12 + (bulanMulai - 1)) + (percepatanBulan - 1);
    const tahunPercepatan = Math.floor(totalBulanIndex / 12);
    const bulanPercepatan = totalBulanIndex % 12;

    hasil += `<p>ðŸ’° Kamu bisa melakukan <b>percepatan pelunasan</b> pada 
              <b>${bulanNames[bulanPercepatan]} ${tahunPercepatan}</b>.</p>`;
  } else {
    hasil += `<p>Belum cukup tabungan untuk melakukan percepatan. Pelunasan normal tetap pada <b>${bulanNames[bulanSelesai - 1]} ${tahunSelesai}</b>.</p>`;
  }

  document.getElementById("hasil").innerHTML = hasil;
});
</script>

</body>
</html>
