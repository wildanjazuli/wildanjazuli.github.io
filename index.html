<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Simulasi Percepatan Pelunasan Cicilan</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 650px; margin: 40px auto; line-height: 1.6; }
  label { display: block; margin-top: 10px; font-weight: bold; }
  input, button { padding: 8px; width: 100%; box-sizing: border-box; margin-top: 5px; }
  button { background: #007bff; color: white; border: none; cursor: pointer; margin-top: 15px; }
  button:hover { background: #0056b3; }
  .result { background: #f5f5f5; padding: 15px; margin-top: 20px; border-radius: 6px; }
</style>
</head>
<body>

<h2>Simulasi Percepatan Pelunasan Cicilan</h2>

<form id="formSimulasi">
  <label>Tabungan per bulan (Rp)</label>
  <input type="number" id="tabunganBulanan" required placeholder="misal 2.000.000">

  <label>Tambahan tabungan tiap 12 bulan (Rp)</label>
  <input type="number" id="bonusTahunan" required placeholder="misal 15.000.000">

  <label>Cicilan per bulan (Rp)</label>
  <input type="number" id="cicilanBulanan" value="5800000" required>

  <label>Tahun mulai cicilan & tabungan</label>
  <input type="number" id="tahunMulai" value="2026" required>

  <label>Bulan mulai cicilan & tabungan (1-12)</label>
  <input type="number" id="bulanMulai" value="6" required>

  <label>Tahun selesai cicilan</label>
  <input type="number" id="tahunSelesai" value="2031" required>

  <label>Bulan selesai cicilan (1-12)</label>
  <input type="number" id="bulanSelesai" value="5" required>

  <button type="submit">Hitung</button>
</form>

<div class="result" id="hasil"></div>

<script>
document.getElementById("formSimulasi").addEventListener("submit", function(e){
  e.preventDefault();

  const tabunganBulanan = parseFloat(document.getElementById("tabunganBulanan").value);
  const bonusTahunan = parseFloat(document.getElementById("bonusTahunan").value);
  const cicilanBulanan = parseFloat(document.getElementById("cicilanBulanan").value);
  const tahunMulai = parseInt(document.getElementById("tahunMulai").value);
  const bulanMulai = parseInt(document.getElementById("bulanMulai").value);
  const tahunSelesai = parseInt(document.getElementById("tahunSelesai").value);
  const bulanSelesai = parseInt(document.getElementById("bulanSelesai").value);

  // Hitung total cicilan seluruh periode
  const totalBulanCicilan = (tahunSelesai - tahunMulai) * 12 + (bulanSelesai - bulanMulai + 1);
  const totalCicilan = totalBulanCicilan * cicilanBulanan;

  // Simulasi tabungan dimulai dari bulan & tahun yang sama
  let totalTabungan = 0;
  let percepatanBulan = null;

  for (let i = 1; i <= totalBulanCicilan; i++) {
    // tambah tabungan bulanan
    totalTabungan += tabunganBulanan;

    // setiap 12 bulan dapat bonus tahunan
    if (i % 12 === 0) {
      totalTabungan += bonusTahunan;
    }

    // hitung total cicilan tersisa (bulan ke depan)
    const sisaBulan = totalBulanCicilan - i;
    const sisaCicilan = sisaBulan * cicilanBulanan;

    // Jika tabungan cukup untuk melunasi seluruh sisa cicilan
    if (totalTabungan >= sisaCicilan && !percepatanBulan) {
      percepatanBulan = i;
    }
  }

  const bulanNames = ["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];

  let hasil = `<h3>Hasil Simulasi Percepatan Pelunasan</h3>`;
  hasil += `<p>Total cicilan normal hingga Mei ${tahunSelesai}: <b>Rp ${totalCicilan.toLocaleString('id-ID')}</b></p>`;
  hasil += `<p>Total tabungan terkumpul hingga akhir periode: <b>Rp ${totalTabungan.toLocaleString('id-ID')}</b></p>`;

  if (percepatanBulan) {
    // Hitung waktu percepatan dalam kalender
    let totalBulanIndex = (tahunMulai - 1) * 12 + (bulanMulai - 1) + percepatanBulan;
    let tahunPercepatan = Math.floor(totalBulanIndex / 12);
    let bulanPercepatan = (totalBulanIndex % 12);

    hasil += `<p>Dengan menabung sebesar <b>Rp ${tabunganBulanan.toLocaleString('id-ID')}</b>/bulan 
              dan bonus tahunan <b>Rp ${bonusTahunan.toLocaleString('id-ID')}</b>, 
              kamu bisa melunasi seluruh sisa cicilan pada 
              <b>${bulanNames[bulanPercepatan]} ${tahunPercepatan}</b>.</p>`;
  } else {
    hasil += `<p>Tabunganmu belum cukup untuk melakukan percepatan pelunasan sebelum Mei ${tahunSelesai}.</p>`;
  }

  document.getElementById("hasil").innerHTML = hasil;
});
</script>

</body>
</html>
